.row
  .large-12.columns
    %h2
      Hi, thank you for visiting C3SV.
    %h3
      Please leave your details so we can get connected.

%form
  .row
    .large-6.columns
      %label
        First Name
        %input{:type => "text"}/
    .large-6.columns
      %label
        Last Name
        %input{:type => "text"}/
  .row
    .large-6.columns
      %label
        Email
        %input{:type => "text"}/
    .large-6.columns
      %label
        Phone
        %input{:type => "text"}/

  .row.referral-types
    .large-4.columns
      %label
        How did you hear about us?
        %select
          %option{:value => "husker", 'data-id' => 'friend'} Friend
          %option{:value => "husker"} Yelp
          %option{:value => "husker"} Facebook
          %option{:value => "husker"} Billboard
          %option{:value => "husker"} Mailer
          %option{:value => "husker"} Google Search
          %option{:value => "husker"} Google Ads
          %option{:value => "husker", 'data-id' => 'other'} Other:
  .row.friends-name
    .large-6.columns
      %label
        What's your friend's name?
        %input{:type => "text", class: 'typeahead'}/
  .row.other-text-field.hide
    .large-6.columns
      %label
        Describe how you heard about us?
        %input{:type => "text"}/

  .row
    .large-6.columns
      %label
        How can we help?
        %select
          %option{:value => "husker"} I am looking for a home church, please plug me in.
          %option{:value => "husker"} I am still church shopping, but keep me informed.
          %option{:value => "husker"} Just visiting friends and family, no need to follow up, thanks!

  .row
    .large-6.columns
      %input#checkbox1{:type => "checkbox", checked: 'checked'}/
      %label Yes, connect with me over social media.

  .row
    .large-12.columns
      %input{:type => "submit", value: 'Get Connected', class: 'button'}/

- content_for :foot do
  :javascript
    $(function() {
      $('.referral-types select').change(function() {
        var selected = $(this).children(':selected').data('id');

        if (selected != 'friend' ) {
          $('.friends-name').hide();

          if (selected == 'other') {
            $('.other-text-field').show();
          }
        } else {
          $('.other-text-field').hide();
          $('.friends-name').show();
        }
      });
    });

    var substringMatcher = function(strs) {
      return function findMatches(q, cb) {
        var matches, substringRegex;
        matches = [];
        substrRegex = new RegExp(q, 'i');

        $.each(strs, function(i, str) {
          if (substrRegex.test(str)) {
            matches.push({ value: str });
          }
        });

        cb(matches);
      };
    };

    var names = [
      'Jason Ong',
      'Brett Cooley',
      'Vance Roush',
      'Kim Roush',
      'Adam Smallcrombe',
      'Keira Smallcrombe',
      'Jon Ochoa',
      'Angeline Tan',
      'Andrew Thomas',
      'Amber Thomas'
    ]

    // instantiate the typeahead UI
    $('.friends-name .typeahead').typeahead({
      hint: true,
      highlight: true,
      minLength: 1
    },
    {
      name: 'names',
      displayKey: 'value',
      source: substringMatcher(names)
    });
